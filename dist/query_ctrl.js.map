{"version":3,"sources":["../src/query_ctrl.js"],"names":["QueryCtrl","SolrQueryCtrl","$scope","$injector","scope","target","type","time","fields","groupEnabled","groupValueField","groupByField","groupLimit","collection","datasource","solrCollection","solrCloudMode","rawParams","numRows","start","sort","sortOrder","outputFormat","query","listCollections","listFields","listRawParams","listOutputFormats","rawQuery","panelCtrl","refresh","templateUrl"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeEA,e,kBAAAA,S;;;;;;;;;;;;;;;;;;;;;+BAGWC,a;;;AACX;AACA,+BAAYC,MAAZ,EAAoBC,SAApB,EAA+B;AAAA;;AAAA,oIACvBD,MADuB,EACfC,SADe;;AAG7B;;;;;AAKA,gBAAKC,KAAL,GAAaF,MAAb;AACA,gBAAKG,MAAL,CAAYA,MAAZ,GAAqB,MAAKA,MAAL,CAAYA,MAAZ,IAAsB,KAA3C;AACA,gBAAKA,MAAL,CAAYC,IAAZ,GAAmB,MAAKD,MAAL,CAAYC,IAAZ,IAAoB,WAAvC;AACA,gBAAKD,MAAL,CAAYE,IAAZ,GAAmB,MAAKF,MAAL,CAAYE,IAAZ,IAAoB,EAAvC;AACA,gBAAKF,MAAL,CAAYG,MAAZ,GAAqB,MAAKH,MAAL,CAAYG,MAAZ,IAAsB,EAA3C;AACA,gBAAKH,MAAL,CAAYI,YAAZ,GAA2B,MAAKJ,MAAL,CAAYI,YAAZ,IAA4B,UAAvD;AACA,gBAAKJ,MAAL,CAAYK,eAAZ,GAA8B,MAAKL,MAAL,CAAYK,eAAZ,IAA+B,EAA7D;AACA,gBAAKL,MAAL,CAAYM,YAAZ,GAA2B,MAAKN,MAAL,CAAYM,YAAZ,IAA4B,EAAvD;AACA,gBAAKN,MAAL,CAAYO,UAAZ,GAAyB,MAAKP,MAAL,CAAYO,UAAZ,IAA0B,MAAnD;AACA,gBAAKP,MAAL,CAAYQ,UAAZ,GAAyB,MAAKR,MAAL,CAAYQ,UAAZ,IAA0B,MAAKC,UAAL,CAAgBC,cAA1C,IAA4D,EAArF;AACA,gBAAKV,MAAL,CAAYW,aAAZ,GAA4B,MAAKX,MAAL,CAAYW,aAAZ,IAA6B,MAAKF,UAAL,CAAgBE,aAA7C,IAA8D,IAA1F;;AAEA,gBAAKX,MAAL,CAAYY,SAAZ,GAAwB,MAAKZ,MAAL,CAAYY,SAAZ,IAAyB,EAAjD;AACA,gBAAKZ,MAAL,CAAYa,OAAZ,GAAsB,MAAKb,MAAL,CAAYa,OAAZ,IAAuB,GAA7C;AACA,gBAAKb,MAAL,CAAYc,KAAZ,GAAoB,MAAKd,MAAL,CAAYc,KAAZ,IAAqB,CAAzC;AACA,gBAAKd,MAAL,CAAYe,IAAZ,GAAmB,MAAKf,MAAL,CAAYe,IAAZ,IAAoB,WAAvC;AACA,gBAAKf,MAAL,CAAYgB,SAAZ,GAAwB,MAAKhB,MAAL,CAAYgB,SAAZ,IAAyB,MAAjD;AACA,gBAAKhB,MAAL,CAAYiB,YAAZ,GAA2B,MAAKjB,MAAL,CAAYiB,YAAZ,IAA4B,OAAvD;AAzB6B;AA0B9B;;;;qCACUC,K,EAAO;AAChB,mBAAO,KAAKT,UAAL,CAAgBU,eAAhB,CAAgCD,SAAS,EAAzC,CAAP;AACD;;;yCAEcA,K,EAAO;AACpB,mBAAO,KAAKT,UAAL,CAAgBU,eAAhB,CAAgCD,SAAS,EAAzC,CAAP;AACD;;;qCAEUA,K,EAAOV,U,EAAY;AAC5B,mBAAO,KAAKC,UAAL,CAAgBW,UAAhB,CAA2BF,SAAS,EAApC,EAAwCV,UAAxC,CAAP;AACD;;;0CAEe;AACd,mBAAO,KAAKC,UAAL,CAAgBY,aAAhB,EAAP;AACD;;;8CAEmB;AAClB,mBAAO,KAAKZ,UAAL,CAAgBa,iBAAhB,EAAP;AACD;;;6CAEkB;AACjB,iBAAKtB,MAAL,CAAYuB,QAAZ,GAAuB,CAAC,KAAKvB,MAAL,CAAYuB,QAApC;AACD;;;6CAEkB;AACjB,iBAAKC,SAAL,CAAeC,OAAf,GADiB,CACS;AAC3B;;;;QAvDgC9B,S;;;;AA0DnCC,oBAAc8B,WAAd,GAA4B,4BAA5B","file":"query_ctrl.js","sourcesContent":["// Copyright 2018 PUE.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n  QueryCtrl\n} from 'app/plugins/sdk';\n\nexport class SolrQueryCtrl extends QueryCtrl {\n  /** @ngInject **/\n  constructor($scope, $injector) {\n    super($scope, $injector);\n\n    /*\n    if (this.target) {\n      this.target.target = this.target.target || '';\n    }\n    */\n    this.scope = $scope;\n    this.target.target = this.target.target || '*:*';\n    this.target.type = this.target.type || 'timeserie';\n    this.target.time = this.target.time || '';\n    this.target.fields = this.target.fields || '';\n    this.target.groupEnabled = this.target.groupEnabled || 'standard';\n    this.target.groupValueField = this.target.groupValueField || '';\n    this.target.groupByField = this.target.groupByField || '';\n    this.target.groupLimit = this.target.groupLimit || 100000;\n    this.target.collection = this.target.collection || this.datasource.solrCollection || '';\n    this.target.solrCloudMode = this.target.solrCloudMode || this.datasource.solrCloudMode || true;\n\n    this.target.rawParams = this.target.rawParams || '';\n    this.target.numRows = this.target.numRows || 100;\n    this.target.start = this.target.start || 0;\n    this.target.sort = this.target.sort || 'timestamp';\n    this.target.sortOrder = this.target.sortOrder || 'desc';\n    this.target.outputFormat = this.target.outputFormat || 'chart';\n  }\n  getOptions(query) {\n    return this.datasource.listCollections(query || '');\n  }\n\n  listCollection(query) {\n    return this.datasource.listCollections(query || '');\n  }\n\n  listFields(query, collection) {\n    return this.datasource.listFields(query || '', collection);\n  }\n\n  listRawParams() {\n    return this.datasource.listRawParams();\n  }\n\n  listOutputFormats() {\n    return this.datasource.listOutputFormats();\n  }\n\n  toggleEditorMode() {\n    this.target.rawQuery = !this.target.rawQuery;\n  }\n\n  onChangeInternal() {\n    this.panelCtrl.refresh(); // Asks the panel to refresh data.\n  }\n}\n\nSolrQueryCtrl.templateUrl = 'partials/query.editor.html';"]}